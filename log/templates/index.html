<!DOCTYPE html>
<html lang="en">

{% load static %}

<head>
  <meta charset="UTF-8" />
  <title>1721 Battery Log</title>

  <script src="{% static 'js/battery_format.js' %}"></script>
</head>

<body>
  {% if user.is_authenticated %} Hello, {{ user.first_name }}
  <form action="{% url 'logout' %}" method="post" style="display: inline-block">
    {% csrf_token %}
    <button type="submit">Log Out</button>
  </form>
  {% else %} You are not logged in
  <a href="{% url 'login' %}"><button>Log In</button></a>
  {% endif %} {% if bad_key %} Security Token not found on server! Not
  recommended to log in. {% endif %}
  <hr />

  <form method="post">
    {% csrf_token %}
    <table>
      <tr>
        <td>
          <label for="battery">Battery:</label>
        </td>
        <td>
          <input list="batteries" id="battery" name="battery" placeholder="Enter or select a battery ID" />
          <datalist id="batteries">
            {% for battery in available_batteries %}
            <option value="{{ battery }}">
              {% endfor %}
          </datalist>
        </td>

        {% for field in form %}
        {% if field.name != "battery" %}
      <tr>
        <td>{{ field.label_tag }}</td>
        <td>{{ field }}</td>
      </tr>
      {% endif %}
      {% endfor %}

      <td colspan="2">
        <button type="submit">Log Entry</button>
      </td>
      </tr>
    </table>
  </form>

  <hr />
  <table>
    <thead>
      <th scope="col">DATE</th>
      <th scope="col">USER</th>
      <th scope="col">BATTERY</th>
      <th scope="col">READY</th>
      <th scope="col">CONDITION</th>
      <th scope="col">CHARGE</th>
      <th scope="col">RINT</th>
      <th scope="col">MEMO</th>
    </thead>
    <tbody>
      {% for entry in entries %}
      <tr>
        <td class="date">{{ entry.date }}</td>
        <td class="user">{{ entry.user }}</td>
        <td class="battery">
          <a href="{% url 'battery_detail' entry.battery %}">{{ entry.battery }}</a>
        </td>
        <td class="ready">{{ entry.ready }}</td>
        <td class="condition">{{ entry.condition }}</td>
        <td class="charge">{{ entry.charge }}</td>
        <td class="rint">{{ entry.rint }}</td>
        <td class="memo">{{ entry.memo }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>

  <style>
    table {
      border-collapse: collapse;
    }

    td {
      border: 1px solid black;
      padding: 8px 30px;
    }
  </style>

  {% if message %}
  <script>
    alert("{{ message }}");
  </script>
  {% endif %}
</body>

</html>